# ==========================================
# 基础设置
# ==========================================
# 开启鼠标支持 (很重要！允许用鼠标选中文本、调节分屏大小)
set -g mouse on

# 设置默认终端模式为 256color (防止 Zsh 主题颜色丢失)
set -g default-terminal "screen-256color"

# ==========================================
# 快捷键优化
# ==========================================
# 将前缀键从 Ctrl+b 修改为 Ctrl+a (更顺手，类似 Screen)
# 如果您习惯 Ctrl+b，可以注释掉下面两行
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# 分屏快捷键优化 (直观记忆)
# 垂直分屏 (Vertical): | 键
unbind %
bind | split-window -h 

# 水平分屏 (Horizontal): - 键
unbind '"'
bind - split-window -v

# 重新加载配置文件 (修改后按 Prefix + r 即可生效)
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# ==========================================
# 面板导航 (Vim 风格)
# ==========================================
bind h select-pane -L  # 左
bind j select-pane -D  # 下
bind k select-pane -U  # 上
bind l select-pane -R  # 右

# ==========================================
# 插件管理 (TPM)
# ==========================================

# 1. 核心插件列表
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# 2. 持久化保存插件 (Resurrect & Continuum)
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# ==========================================
# 插件配置
# ==========================================

# resurect: 恢复 Vim 会话 (非常重要，否则重启 vim 里的内容就没了)
set -g @resurrect-strategy-vim 'session'
# 恢复面板内容
set -g @resurrect-capture-pane-contents 'on'

# continuum: 开启自动恢复 (Last Saved Environment)
set -g @continuum-restore 'on'
# 每 15 分钟自动保存一次
set -g @continuum-save-interval '15'

# ==========================================
# 初始化 TPM (必须放在配置文件的最后一行！)
# ==========================================
run '~/.tmux/plugins/tpm/tpm'
